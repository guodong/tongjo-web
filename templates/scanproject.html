{!extends file='layout.html'!} {!block name=main!}
<div class="scanproject">
<div style="margin:20px;">
<div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
  <!-- Indicators -->
  <ol class="carousel-indicators">
    <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
    <li data-target="#carousel-example-generic" data-slide-to="1"></li>
    <li data-target="#carousel-example-generic" data-slide-to="2"></li>
  </ol>

  <!-- Wrapper for slides -->
  <div class="carousel-inner" role="listbox">
    <div class="item active">
      <img src="/img/index/header-bg-c96b5d9.jpg" alt="...">
      <div class="carousel-caption">
        ...
      </div>
    </div>
    <div class="item">
      <img src="/img/index/header-bg-c96b5d9.jpg" alt="...">
      <div class="carousel-caption">
        ...
      </div>
    </div>
    <div class="item">
      <img src="/img/index/header-bg-c96b5d9.jpg" alt="...">
      <div class="carousel-caption">
        ...
      </div>
    </div>
  </div>
  <!-- Controls -->
  <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
    <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
    <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>
</div>
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-3 col-md-3">
        <div class="leftMenu">
            <div class="panel-group" id="accordion">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" data-parent="#accordion" href="#category-1" data-target="#category-1"><span class="glyphicon glyphicon-folder-close">
                            </span>技术</a>
                        </h4>
                    </div>
                    <div id="category-1" class="panel-collapse collapse">
                        <div class="panel-body">
                            <table class="table">
                                <tr>
                                    <td>
                                        <span class="glyphicon glyphicon-flash text-success"></span><a href="#category-1/1">计算机</a>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <span class="glyphicon glyphicon-file text-info"></span><a href="#category-1/2">通信</a>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <span class="glyphicon glyphicon-comment text-success"></span><a href="#category-1/3">互联网</a>
                                        <span class="badge">42</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <span class="glyphicon glyphicon-comment text-success"></span><a href="#category-1/4">智能</a>
                                        <span class="badge">42</span>
                                    </td>
                                </tr>
                                                                <tr>
                                    <td>
                                        <span class="glyphicon glyphicon-comment text-success"></span><a href="#category-1/5">自动化</a>
                                        <span class="badge">42</span>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" data-parent="#accordion" href="#category-2" data-target="#category-2"><span class="glyphicon glyphicon-th">
                            </span>设计</a>
                        </h4>
                    </div>
                    <div id="category-2" class="panel-collapse collapse">
                        <div class="panel-body">
                            <table class="table">
                                <tr>
                                    <td>
                                                                            <span class="glyphicon glyphicon-pencil text-primary"></span><a href="#category-2/1">艺术设计</a>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                                                            <span class="glyphicon glyphicon-pencil text-primary"></span><a href="#category-2/2">工业设计</a>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                                                            <span class="glyphicon glyphicon-pencil text-primary"></span><a href="#category-2/3">交互设计</a>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                                                            <span class="glyphicon glyphicon-pencil text-primary"></span><a href="#category-2/4">平面设计</a>
                                    </td>
                                </tr>
                                                                <tr>
                                    <td>
                                                                            <span class="glyphicon glyphicon-pencil text-primary"></span><a href="#category-2/5">动画设计</a>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" data-parent="#accordion" href="#category-3" data-target="#category-3"><span class="glyphicon glyphicon-user">
                            </span>商业市场</a>
                        </h4>
                    </div>
                    <div id="category-3" class="panel-collapse collapse">
                        <div class="panel-body">
                            <table class="table">
                                <tr>
                                    <td>
                                        <span class="glyphicon glyphicon-pencil text-primary"></span><a href="#category-3/1">营销</a>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <span class="glyphicon glyphicon-pencil text-primary"></span><a href="#category-3/2">管理</a>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                       <span class="glyphicon glyphicon-pencil text-primary"></span><a href="#category-3/3">策划</a>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" data-parent="#accordion" href="#category-4" data-target="#category-4"><span class="glyphicon glyphicon-file">
                            </span>校园创业</a>
                        </h4>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" data-parent="#accordion" href="#category-5" data-target="#category-5"><span class="glyphicon glyphicon-file">
                            </span>创意</a>
                        </h4>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" data-parent="#accordion" href="#category-6" data-target="#category-6"><span class="glyphicon glyphicon-file">
                            </span>公益</a>
                        </h4>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" data-parent="#accordion" href="#category-7"data-target="#category-7"><span class="glyphicon glyphicon-file">
                            </span>比赛</a>
                        </h4>
                    </div>
                </div>
                
            </div>
            <div class = "row textcenter">
              <div class = "col-sm-4"><a href="#special-1">最热</a></div>
              <div class = "col-sm-4"><a href="#special-2">最新</a></div>
              <div class = "col-sm-4"><a href="#special-3">推荐</a></div>
            </div>
        </div>
        </div>
        <div class="col-sm-9 col-md-9">
            <div class="well" ng-controller="scanController">
            <div ng-view></div>
            </div>
        </div>
    </div>
    </div>
</div>
<script>
	require(
			[ 'model/user', 'jquery', 'angular', 'angular-route', 'ui-bootstrap'],
			function(Users, $, angular,route,bootstrap) {
				var scanApp = angular.module('scanApp',['ngRoute','ui.bootstrap']);
				scanApp.config(['$routeProvider',function($routeProvider){
					$routeProvider.when('/',{
						templateUrl:'scanproject-1',
						controller:'defaultCtl'
					}).when('/special-:specialId',{
						templateUrl:'scanproject-2',
						controller:'categoryCtl'
					}).when('/category-:categoryId',{
						templateUrl:'scanproject-2',
						controller:'categoryCtl'
					}).when('/category-:categoryId/:subcategoryId',{
						templateUrl:'scanproject-2',
						controller:'categoryCtl'
					}).otherwise({
						redirectTo:'/'
					});		
				}]);
				scanApp.controller('defaultCtl',function($scope){
					//TODO 获得数据
					$scope.projects = projects;
					$(".tech span").hover(function(){
						$(this).find("div").fadeIn();
					},function(){
						$(this).find("div").fadeOut();
					});
				});
				scanApp.controller('categoryCtl',function($scope,$routeParams){
					//TODO 获得数据
					$scope.projects = projects.concat(projects).concat(projects.reverse())
									  .concat(projects).concat(projects.reverse());
					if($routeParams.specialId != null){
						$scope.title = specialTitle[$routeParams.specialId-1];
					}else if($routeParams.subcategoryId != null){
						$scope.title = subcategoryTitle[$routeParams.categoryId-1][$routeParams.subcategoryId-1];
						//alert($routeParams.subcategoryId);
					}else if($routeParams.categoryId != null){
						//alert($routeParams.categoryId);
						$scope.title = categoryTitle[$routeParams.categoryId-1];
					}
					$scope.page.index = 1;
					//$scope.id = $routeParams.categoryId;
				});
				var specialTitle = new Array("最热项目","最新项目","推荐项目");
				var categoryTitle = new Array("技术","设计","商业市场","校园创业","创意","公益","比赛");
				var subcategoryTitle = new Array(["技术 》计算机","技术 》 通信","技术 》 互联网","技术 》 智能","技术 》自动化"],
						["设计 》艺术设计","设计 》工业设计","设计 》交互设计","设计 》平面设计","设计 》动画设计"],
						["商业市场 》营销","商业市场 》管理","商业市场 》策划"]);
				var projects = new Array(
					{
						imgurl: "/img/web.png",
						teamcount: 2,
						personcount: 3,
						link:"#",
						title:"网站开发"
					},
					{
						imgurl: "/img/cpt.png",
						teamcount: 2,
						personcount: 3,
						link:"#",
						title:"比赛"
					},
					{
						imgurl: "/img/market.png",
						teamcount: 2,
						personcount: 3,
						link:"#",
						title:"商业市场"
					},
					{
						imgurl: "/img/phone.png",
						teamcount: 2,
						personcount: 3,
						link:"#",
						title:"移动设备"
					});
				scanApp.controller("scanController", ["$scope", function ($scope) {
					$scope.page = {
						    size: 8,
						    index: 1
				    };
					$scope.hoverIn = function(){
					    this.hoverEdit = true;
					};

					$scope.hoverOut = function(){
					    this.hoverEdit = false;
					};
					
					$scope.more = function (event,specialId) {  
						//TODO 获取更多数据
						if ($(event.target).html() == "查看更多&gt;&gt;")
							$(event.target).html("<<收起");
						else $(event.target).html("查看更多>>");
						//console.log(specialId);
				   }
				}]);
				scanApp.filter('size', function() {
					  return function (items) {
					    if (!items)
					      return 0;
					    return items.length || 0
					  }
			   });
			   scanApp.filter('paging', function() {
					 return function (items, index, pageSize) {
					    if (!items)
					      return [];
					    var offset = (index - 1) * pageSize;
					    return items.slice(offset, offset + pageSize);
					 }
			  });
			   angular.bootstrap(document, [ 'scanApp' ]);
			});
</script>
{!/block!}
