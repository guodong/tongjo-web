{!extends file='layout.html'!} {!block name=main!}
<script>
	require(['angular', 'angular-route', 'angular-resource'],
			function(angular, angular_route, $resource) {
				var app = angular.module('me', ['ngRoute', 'ngResource'])
						.config(['$routeProvider', function($routeProvider) {
							$routeProvider.when('/info', {
								templateUrl: 'tpl/me/info.html',
								controller: 'info'
							}).when('/org/project', {
								templateUrl: 'tpl/me/project.html',
								controller: 'project'
							}).when('/project/create', {
								templateUrl: 'tpl/me/project-create.html',
								controller: 'project'
							}).when('/project/joined', {
								templateUrl: 'tpl/me/project-joined.html',
								controller: 'project-joined'
							}).when('/team', {
								templateUrl: 'tpl/me/team.html',
								controller: 'team'
							}).otherwise({
								redirectTo: '/'
							});
						}]);
				app.controller('info', function($scope, $resource) {
					var User = $resource(API + 'user/:userId');
					var user = User.get({
						userId: 1
					}, function() {
						$scope.user = user;
					});
				});
				app.controller('project-joined', function($scope, $resource) {
					var Project = $resource(API + 'user/:user_id/type/:type/project');
					var projects = Project.query({user_id: 1, type: 'joined'}, function() {
						$scope.projects = projects;
					});
				});
				app.controller('project', function($scope) {

				});
				app.controller('team', function($scope, $resource) {
					var Team = $resource(API+'user/:user_id/team')
					var teams = Team.query({user_id: 1}, function(){
						$scope.teams = teams;
					})
				});
				angular.bootstrap(document, ['me']);
			});
</script>

<div class="ucenter">
	<div class="row">
		<div class="col-md-3">
			<div class="avatar clearfix">
				<img class="img-thumbnail" alt="140x140"
					src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQwIiBoZWlnaHQ9IjE0MCIgdmlld0JveD0iMCAwIDE0MCAxNDAiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiPjxkZWZzLz48cmVjdCB3aWR0aD0iMTQwIiBoZWlnaHQ9IjE0MCIgZmlsbD0iI0VFRUVFRSIvPjxnPjx0ZXh0IHg9IjQ0LjA0Njg3NSIgeT0iNzAiIHN0eWxlPSJmaWxsOiNBQUFBQUE7Zm9udC13ZWlnaHQ6Ym9sZDtmb250LWZhbWlseTpBcmlhbCwgSGVsdmV0aWNhLCBPcGVuIFNhbnMsIHNhbnMtc2VyaWYsIG1vbm9zcGFjZTtmb250LXNpemU6MTBwdDtkb21pbmFudC1iYXNlbGluZTpjZW50cmFsIj4xNDB4MTQwPC90ZXh0PjwvZz48L3N2Zz4="
					data-holder-rendered="true">
				<div>Tongjo</div>
			</div>
			<div class="list-group">
				<!-- <a href="#org/project" class="list-group-item"><span
					class="glyphicon glyphicon-th-list"></span> 我发布的项目</a>  --><a href="#project/joined"
					class="list-group-item"><span
					class="glyphicon glyphicon-cloud-upload"></span> 我参加的项目</a> <a href="#team"
					class="list-group-item"><span class="glyphicon glyphicon-tower"></span>
					我的团队</a> <a href="#info" class="list-group-item"><span
					class="glyphicon glyphicon-user"></span> 个人信息</a> <a href="#"
					class="list-group-item"><span class="glyphicon glyphicon-off"></span>
					退出</a>
			</div>
		</div>
		<div class="col-md-9">
			<div ng-view></div>
		</div>
	</div>
</div>
{!/block!}
